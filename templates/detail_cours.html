{% extends 'base.html' %}

{% block title %}Cours{% endblock %}

{% block content %}
<div class="d-flex align-items-center mb-3">
    <a href="{{ url_for('afficher_cours') }}" class="me-2 text-dark text-decoration-none">
        <i class="fas fa-arrow-left"></i>
    </a>
    <h2 class="flex-grow-1 mb-0">{{ cours.titre_cours }}</h2>

    {% if cours in current_user.cours_suivis %}
        <form action="{{ url_for('ne_plus_suivre_cours', uid_cours=cours.uid_cours) }}" method="post">
            <button type="submit" class="btn btn-warning">Ne plus suivre</button>
        </form>
    {% else %}
        <form action="{{ url_for('suivre_cours', uid_cours=cours.uid_cours) }}" method="post">
            <button type="submit" class="btn btn-primary">Suivre ce cours</button>
        </form>
    {% endif %}

    <span class="text-muted">{{ cours.categorie_cours }}</span>
</div>

<div class="container">
    <p>{{ cours.description_cours | safe }}</p>

    
    {% if cours.lien %}
        <p>Lien  : <a href="{{ cours.lien }}">{{ cours.lien }}</a></p>
    {% endif %}
    
    {% if cours.fichier %}
    <a href="{{ url_for('telecharger_fichier', filename=cours.fichier) }}" class="btn btn-primary" download>Télécharger le fichier</a>
{% endif %}
</div>

{% if current_user.is_authenticated and current_user.role == 2 %}
<div class="mt-3 d-flex align-items-center gap-2">
    <a href="{{ url_for('modifier_cours', uid_cours=cours.uid_cours) }}" class="btn btn-primary">Modifier</a>
    <form action="{{ url_for('supprimer_cours', uid_cours=cours.uid_cours) }}" method="post">
        <button type="submit" class="btn btn-danger" onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce cours ?');">Supprimer</button>
    </form>
</div>
{% endif %}

{% endblock %}
